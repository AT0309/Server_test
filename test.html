<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test</title>
</head>
<body>
  <h1>入力フォーム</h1>
  <form action="/confirm" method="post"><br>
    名前<input type="text" name="name"><br>
    在住都道府県<select name="prefecture" id="prefecture"></select><br>
    Eメールアドレス<input type="email"><br>
    <input type="submit" value="送信">
  </form>
  
  <script>
    var prefecture=document.getElementById("prefecture");
    console.log("search");
    $.ajax({
      url: "https://opendata.resas-portal.go.jp/api/v1/prefectures/",
      type: "GET",
      headers: {
          'X-API-KEY':"WP4ecYE1jXwTwoaSk0OnZxzXa6YzDZohjQNWNA9G"
      },
      async: "false",
      success: function(result_data) {
          for(let i=0; i<result_data.result.length; i++){
            var a=document.createElement("option");
            a.innerText=result_data.result[i].prefName;
            a.value=i+1;
            prefecture.appendChild(a);
          }
      }
    });
  </script>

</body>
</html>